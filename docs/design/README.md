# Проєктування системи

## Big Picture

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;">

![Big Picture](https://i.imgur.com/SSEPijz.png)

</center>

## Deployment

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;">

![Deployment](https://i.imgur.com/ZGXRgLd.png)

</center>

## User Flow

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;">

![User Flow](https://i.imgur.com/37zWog2.png)

</center>

## Діаграма прецедентів

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml
    actor User
    actor Moderator

    usecase "<b>DM_AUTH\nРеєстрація, авторизація" as DM_AUTH
    usecase "<b>DM_DATA\nРобота з книгами та пошук" as DM_DATA
    usecase "<b>DM_REPORT_1.1\nПоскаржитися" as DM_REPORT_1.1
    usecase "<b>DM_SUPPORT_1.1\nВідправити запит до служби підтримки" as DM_SUPPORT_1.1
    User -r-> DM_DATA
    User -r-> DM_AUTH
    User -r-> DM_REPORT_1.1
    User -r-> DM_SUPPORT_1.1

    Moderator --u-|> User
    usecase "<b>DM_REPORT_1.2\nОбробка скарги" as DM_REPORT_1.2
    usecase "<b>DM_SUPPORT_1.2\nОбробка запиту про допомогу" as DM_SUPPORT_1.2
    Moderator -l-> DM_REPORT_1.2
    Moderator -l-> DM_SUPPORT_1.2
@enduml

</center>

## Схеми використання для користувача

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml
actor User

    usecase "<b>DM_AUTH\nРеєстрація, авторизація" as DM_AUTH
    usecase "<b>DM_AUTH_1.1\nРеєстрація нового користувача" as DM_AUTH_1.1
    usecase "<b>DM_AUTH_1.2\nВхід користувача в Систему" as DM_AUTH_1.2

    usecase "<b>DM_DATA\nРобота з книгами та пошук" as DM_DATA
    usecase "<b>DM_DATA_1.1\nДодання книги" as DM_DATA_1.1
    usecase "<b>DM_DATA_1.2\nРедагування книги" as DM_DATA_1.2
    usecase "<b>DM_DATA_1.3\nВидалення книги власником" as DM_DATA_1.3
    usecase "<b>DM_DATA_2.1\nПошук книги за фільтрами" as DM_DATA_2.1
    usecase "<b>DM_DATA_2.1\nПошук книги за тегами" as DM_DATA_2.2
    usecase "<b>DM_DATA_3.1\nЗавантаження книги" as DM_DATA_3.1
    usecase "<b>DM_DATA_3.2\nЗалишити коментар" as DM_DATA_3.2
    usecase "<b>DM_DATA_3.3\nДодати книгу до власної бібліотеки" as DM_DATA_3.3

    usecase "<b>DM_REPORT_1.1\nПоскаржитися" as DM_REPORT_1.1
    usecase "<b>DM_SUPPORT_1.1\nВідправити запит до служби підтримки" as DM_SUPPORT_1.1

    User -r-> DM_DATA
    User -l-> DM_AUTH
    User -u-> DM_REPORT_1.1
    User -u-> DM_SUPPORT_1.1

    DM_AUTH_1.1 .d.> DM_AUTH :extends
    DM_AUTH_1.2 .u.> DM_AUTH :extends

    DM_DATA_1.1 ..> DM_DATA :extends
    DM_DATA_1.2 .u.> DM_DATA :extends
    DM_DATA_1.3 .l.> DM_DATA :extends
    DM_DATA_2.1 ..> DM_DATA :extends
    DM_DATA_2.2 .u.> DM_DATA :extends
    DM_DATA_3.1 .u.> DM_DATA :extends
    DM_DATA_3.2 .u.> DM_DATA :extends
    DM_DATA_3.3 .u.> DM_DATA :extends
@enduml

</center>

## Схеми використання для модератора

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml
    actor Moderator

    usecase "<b>DM_REPORT_1.2\nОбробка скарги" as DM_REPORT_1.2
    usecase "<b>DM_SUPPORT_1.2\nОбробка запиту про допомогу" as DM_SUPPORT_1.2
    Moderator -r-> DM_REPORT_1.2
    Moderator -l-> DM_SUPPORT_1.2
@enduml

</center>

## Сценарії

***ID:*** DM_AUTH_1.1

***НАЗВА:*** Реєстрація нового користувача

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** Була натиснута кнопка реєстрації

***РЕЗУЛЬТАТ:*** Користувач зареєстрований у Системі

***ВИКЛЮЧНІ СИТУАЦІЇ:***

DM_AUTH_1.1_EX_1 - Були введені некоректні, або недопустимі значення полів<br>
DM_AUTH_1.1_EX_2 - Користувач з електронною адресою вже зареєстрований або такої адреси не існує<br>
DM_AUTH_1.1_EX_3 - Код аутентифікації введено не вірно

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml
    |Користувач|
    start
    : Натиснув кнопку реєстрації;
    : Отримує сторінку реєстрації;
    : Вводить дані: електронна пошта, пароль, прізвище, ім'я;
    |Система|
    : Перевіряє правильність введених данних;
    note right #ffaaaa
    <b> Можливе винекнення
    <b> DM_AUTH_1.1_EX_1,
    <b> DM_AUTH_1.1_EX_2
    end note
    : Відправляє на вказану електронну адресу лист з паролем для повної аутентифікації;
    |Користувач|
    : Вводить пароль аутентифікації;
    |Система|
    : Перевіряє пароль;
    note right #ffaaaa
    <b> Можливе винекнення
    <b> DM_AUTH_1.1_EX_3
    end note
    : Вносить користувача в базу;
    |Користувач|
    : Отримує повідомлення про успішну реєстрацію;
    stop;
@enduml

</center>  

***ID:*** DM_AUTH_1.2

***НАЗВА:*** Вхід користувача в Систему

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** Була натиснута кнопка входу

***РЕЗУЛЬТАТ:*** Користувач увійшов у Систему

***ВИКЛЮЧНІ СИТУАЦІЇ:***

DM_AUTH_1.2_EX_1 - Були введені неправильні дані

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml
    |Користувач|
    start
    : Натиснув кнопку входу;
    : Отримує сторінку входу;
    : Вводить дані: електронна пошта, пароль ;
    |Система|
    : Перевіряє правильність введених данних;
    note right #ffaaaa
    <b> Можливе винекнення
    <b> DM_AUTH_1.2_EX_1
    end note
    |Користувач|
    : Увійшов у систему;
    : Отримує повідомлення про успішний вхід;
    stop;
@enduml

</center>


***ID:*** DM_DATA_1.1

***НАЗВА:*** Додання книги

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** Користувач натиснув на кнопку для додання книги в Систему

***РЕЗУЛЬТАТ:*** Книга додана в Систему

***ВИКЛЮЧНІ СИТУАЦІЇ:*** -

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Користувач|
    start
    : Натиснув на кнопку для додання книги в Систему;
    |Система|
    : Відкриває форму для додавання книги;
    |Користувач|
    : Додає файли та (або) текстові дані;
    : Додає теги та опис за потреби;
    : Натискає кнопку підтвердження;
    |Система|
    : Книга додана в Систему;
    : Повідомляє Користувача про успішне завершення операції;
    |Користувач|
    : Отримує повідомлення про успішне завершення операції;
    stop;

@enduml

</center>  


***ID:*** DM_DATA_1.2

***НАЗВА:*** Редагування книги

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** Користувач натиснув на кнопку редагування

***РЕЗУЛЬТАТ:*** Книга відредагована

***ВИКЛЮЧНІ СИТУАЦІЇ:*** -

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Користувач|
    start
    : Натиснув на кнопку редагування;
    |Система|
    : Створює форму редагування книги;
    |Користувач|
    : Редагує файли;
    : Натискає кнопку підтвердження;
    |Система|
    : Книга відредагована;
    : Повідомляє Користувача про успішне завершення операції;
    |Користувач|
    : Отримує повідомлення про успішне завершення операції;
    stop;

@enduml

</center>

***ID:*** DM_DATA_1.3

***НАЗВА:*** Видалення книги власником

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** Користувач натиснув на кнопку видалення

***РЕЗУЛЬТАТ:*** Книга видалено

***ВИКЛЮЧНІ СИТУАЦІЇ:*** DM_DATA_1.3_EX_1 - Користувач не підтвердив видалення даних.

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Користувач|
    start
    :Обирає дані;
    :Натискає на кнопку видалення;
    |Система|
    : Вимагає підтвердження видалення книги;
    note right #ffaaaa
    <b> Можливе винекнення
    <b> DM_DATA_1.3_EX_1
    end note
    |Користувач|
    : Підтверджує видалення;
    |Система|
    : Дані видалено;
    : Повідомляє Користувача про успішне завершення операції;
    |Користувач|
    : Отримує повідомлення про успішне завершення операції;
    stop;
@enduml

</center>

***ID:*** DM_DATA_2.1

***НАЗВА:*** Пошук книги за фільтрами

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** Користувач вибрав фільтри та натиснув на кнопку пошуку

***РЕЗУЛЬТАТ:*** Дані знайдено та виведено

***ВИКЛЮЧНІ СИТУАЦІЇ:*** DM_DATA_2.1_EX_1 - Нічого не знайдено

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Користувач|
    start
    :Вибрав фільтри;
    :Натиснув на кнопку пошуку;
    |Система|
    : Виконує пошук;
    note right #ffaaaa
    <b> Можливе винекнення
    <b> DM_DATA_2.1_EX_1
    end note
    : Книги виведено;
    |Користувач|
    : Завершив взаємодію;
    stop;
@enduml

</center>

***ID:*** DM_DATA_2.2

***НАЗВА:*** Пошук книги за тегами

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** -

***РЕЗУЛЬТАТ:*** Дані

***ВИКЛЮЧНІ СИТУАЦІЇ:*** DM_DATA_2.2_EX_1 - Нічого не виявлено

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Користувач|
    start
    : Вибирає тег або теги;
    : Натискає на кнопку пошуку;
    |Система|
    : Виконує пошук;
    note right #ffaaaa
    <b> Можливе виникнення
    <b> DM_DATA_2.2_EX_1
    end note
    : Демонструє Користувачу знайдені дані;
    |Користувач|
    : Закінчує взаємодію;
    stop;
@enduml

</center>

***ID:*** DM_DATA_3.1

***НАЗВА:*** Завантаження книги

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** -

***РЕЗУЛЬТАТ:*** Файл завантажено

***ВИКЛЮЧНІ СИТУАЦІЇ:*** -

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Користувач|
    start
    : Відкриває вікно повної інформації про книгу;
    : Натискає на кнопку завантаження файлу;
    |Система|
    : Відправляє файл Користувачеві для завантаження;
    |Користувач|
    : Завантажує;
    : Закінчує взаємодію;
    stop;
@enduml

</center>


***ID:*** DM_DATA_3.2

***НАЗВА:*** Залишити коментар

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** Зареєстрований Користувач натиснув на іконку коментаря

***РЕЗУЛЬТАТ:*** Коментар доданий до книги

***ВИКЛЮЧНІ СИТУАЦІЇ:*** -

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Користувач|
    start
    : Відкриває сторінку книги;
    : Натискає на кнопку іконку коментаря;
    |Система|
    : Відкриває форму додання коментаря;
    |Користувач|
    : Пише кометар;
    |Система|
    : Додає коментар до книги;
    stop;
@enduml

</center>


***ID:*** DM_DATA_3.3

***НАЗВА:*** Додати книгу до власної бібліотеки

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** -

***РЕЗУЛЬТАТ:*** Книга додана до бібліотеки Користувача

***ВИКЛЮЧНІ СИТУАЦІЇ:*** -

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Користувач|
    start
    : Відкриває сторінку книги;
    : Натискає на кнопку додати до бібліотеки;
    |Система|
    : Додає книгу до бібліотеки Користувача;
    stop;
@enduml

</center>

***ID:*** DM_REPORT_1.1

***НАЗВА:*** nПоскаржитися

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** -

***РЕЗУЛЬТАТ:*** Скарга відправлена на розгляд Модератором

***ВИКЛЮЧНІ СИТУАЦІЇ:*** -

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Користувач|
    start
    : Натискає на кнопку подати скаргу;
    |Система|
    : Відкриває форму додання скарги;
    |Користувач|
    : Пише скаргу;
    |Система|
    : Зберігає скаргу для подальшого розгляду;
    stop;
@enduml

</center>


***ID:*** DM_REPORT_1.2

***НАЗВА:*** Обробка скарги

***УЧАСНИКИ:*** Модератор, Система

***ПЕРЕДУМОВИ:*** Скарга потрапила до Системи

***РЕЗУЛЬТАТ:*** Скарга прийнята і зробленні дії з подолання проблеми. Скарга відхилена

***ВИКЛЮЧНІ СИТУАЦІЇ:*** DM_REPORT_1.2_EX_1 - Модератор визначив скаргу беззмістовною

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Система|
    start
    :Надсилає скаргу Модератору;
    |Модератор|
    : Перевіряє скаргу;
    note right #ffaaaa
    <b> Можливе винекнення
    <b> DM_REPORT_1.2_EX_1
    end note
    |Модератор|
    : Приймає скаргу і виконує відповідні дії з подолання проблеми;
    |Система|
    : Скарга закрита;
    stop;
@enduml

</center>


***ID:*** DM_SUPPORT_1.1

***НАЗВА:*** Відправити запит до служби підтримки

***УЧАСНИКИ:*** Користувач, Система

***ПЕРЕДУМОВИ:*** Користувач натиснув на кнопку написати до підтримки

***РЕЗУЛЬТАТ:*** Запит до служби підтримки створено та відправлено в систему

***ВИКЛЮЧНІ СИТУАЦІЇ:*** -

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml
    |Користувач|
    start
    : Натиснув на кнопку написати в підтримку;
    |Система|
    : Створює форму для запита;
    |Користувач|
    : Пише лист;
    : Натискає кнопку підтвердження;
    |Система|
    : Запит до служби підтримки створено;
    : Запит відправлено;
    stop;
@enduml

</center>


***ID:*** DM_SUPPORT_1.2

***НАЗВА:*** Обробка запиту про допомогу

***УЧАСНИКИ:*** Модератор, Система

***ПЕРЕДУМОВИ:*** Лист про допомогу потрапив до Системи

***РЕЗУЛЬТАТ:*** Запит отримав відповідь

***ВИКЛЮЧНІ СИТУАЦІЇ:*** -

***ОСНОВНИЙ СЦЕНАРІЙ:***

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    |Система|
    start
    :Надсилає запит Модератору;
    |Модератор|
    : Перевіряє запит;
    : Пише відповідь;
    |Система|
    : Відповідь зберігаєть;
    stop;
@enduml

</center>
