<div class="">
  <h5 class="mb-1 font-normal">Мої замовлення</h5>
	<div>

    <mat-expansion-panel *ngFor="let order of orders" class="mt-3">
      <mat-expansion-panel-header class="py-10 order-expansion">
        <mat-panel-title class="flex justify-between">

          <div>
            <p class="text-sm">Замовлення № {{order?.id}}</p>
            <div [ngClass]="{
              'bg-dark': order?.status === 'rejected',
              'bg-blue-300 text-dark': order?.status === 'pending' || order?.status === 'initialized' || order?.status === 'sent',
              'bg-success': order?.status === 'completed'
              }"
                 class="badge"
                 [ngSwitch]="order?.status">
              <span *ngSwitchCase="'rejected'">Відхилено</span>
              <span *ngSwitchCase="'pending'">Обробляється</span>
              <span *ngSwitchCase="'initialized'">Оброблено</span>
              <span *ngSwitchCase="'sent'">Відправлено</span>
              <span *ngSwitchCase="'completed'">Виконано</span>
            </div>
          </div>
          <div>
            <p class="text-sm">Сума замовлення</p>
            <span>{{sumPrices(order.order_items).toFixed(2)}} $</span>
          </div>
          <div>
            <p class="text-sm">Дата</p>
            <span>{{order?.timestamp | date: 'dd.MM.yyyy'}}</span>
          </div>

      </mat-panel-title>
      </mat-expansion-panel-header>
        <table mat-table [dataSource]="order.order_items" class="w-100">
          <ng-container matColumnDef="link">
            <th mat-header-cell *matHeaderCellDef> Посилання на товар </th>
            <td mat-cell *matCellDef="let element"> <a [routerLink]="['/products', element.product_id]">/products/{{element.product_id}}</a> </td>
          </ng-container>
          <ng-container matColumnDef="ex_quantity">
            <th mat-header-cell *matHeaderCellDef> Кількість </th>
            <td mat-cell *matCellDef="let element"> {{element.ex_quantity}} </td>
          </ng-container>
          <ng-container matColumnDef="price">
            <th mat-header-cell *matHeaderCellDef> Ціна </th>
            <td mat-cell *matCellDef="let element"> {{element.price}} $ </td>
          </ng-container>
          <ng-container matColumnDef="sum">
            <th mat-header-cell *matHeaderCellDef> Сума </th>
            <td mat-cell *matCellDef="let element"> {{(element.price*element.ex_quantity).toFixed(2)}} $ </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="['link', 'ex_quantity', 'price', 'sum']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['link', 'ex_quantity', 'price', 'sum'];"></tr>
        </table>
    </mat-expansion-panel>

	</div>
</div>
